(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34024fba"],{"0b49":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},["edit"===t.type?a("el-link",{attrs:{icon:"el-icon-edit"},on:{click:t.closeThisView}},[t._v(t._s(t.$t("common.cancel_edit")))]):t._e(),t._v(" "),"edit"===t.type?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["delete_finance_social_insurance","delete_finance"],expression:"['delete_finance_social_insurance', 'delete_finance']"}],staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-edit"},on:{click:t.onDelete}},[t._v(t._s(t.$t("common.delete")))]):t._e(),t._v(" "),"show"===t.type?a("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["edit_finance_social_insurance","edit_finance"],expression:"['edit_finance_social_insurance', 'edit_finance']"}],attrs:{icon:"el-icon-edit"},on:{click:t.goToEdit}},[t._v(t._s(t.$t("common.edit")))]):t._e(),t._v(" "),a("el-form",{staticClass:"insurance-form",attrs:{inline:!0,model:t.tableData,"label-width":"80px","label-position":"left"}},[a("el-row",[a("el-form-item",{attrs:{label:"人员"}},[a("person-selector",{attrs:{editable:t.editable,"option-url":"/api/people/options"},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}})],1)],1),t._v(" "),a("el-row",[a("form-item",{attrs:{editable:t.editable,label:"经费来源"}},[a("el-input",{model:{value:t.otherData.fund_source,callback:function(e){t.$set(t.otherData,"fund_source",e)},expression:"otherData.fund_source"}})],1)],1),t._v(" "),a("el-row",[a("form-item",{attrs:{label:"日期",editable:t.editable}},[a("el-date-picker",{attrs:{placeholder:t.$t("common.pleaseChoose")},model:{value:t.otherData.date,callback:function(e){t.$set(t.otherData,"date",e)},expression:"otherData.date"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"缴费基数"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"个人"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"单位"}})],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"养老保险"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.pension_base_amount,callback:function(e){t.$set(t.tableData,"pension_base_amount",e)},expression:"tableData.pension_base_amount"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.pension_by_individual,callback:function(e){t.$set(t.tableData,"pension_by_individual",e)},expression:"tableData.pension_by_individual"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.pension_by_institution,callback:function(e){t.$set(t.tableData,"pension_by_institution",e)},expression:"tableData.pension_by_institution"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"医疗保险"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.medical_base_amount,callback:function(e){t.$set(t.tableData,"medical_base_amount",e)},expression:"tableData.medical_base_amount"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.medical_by_individual,callback:function(e){t.$set(t.tableData,"medical_by_individual",e)},expression:"tableData.medical_by_individual"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.medical_by_institution,callback:function(e){t.$set(t.tableData,"medical_by_institution",e)},expression:"tableData.medical_by_institution"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"工伤保险"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.work_injury_base_amount,callback:function(e){t.$set(t.tableData,"work_injury_base_amount",e)},expression:"tableData.work_injury_base_amount"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.work_injury_by_institution,callback:function(e){t.$set(t.tableData,"work_injury_by_institution",e)},expression:"tableData.work_injury_by_institution"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"医疗保险"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.unemployment_base_amount,callback:function(e){t.$set(t.tableData,"unemployment_base_amount",e)},expression:"tableData.unemployment_base_amount"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.unemployment_by_individual,callback:function(e){t.$set(t.tableData,"unemployment_by_individual",e)},expression:"tableData.unemployment_by_individual"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.unemployment_by_institution,callback:function(e){t.$set(t.tableData,"unemployment_by_institution",e)},expression:"tableData.unemployment_by_institution"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row"},[a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:"生育医疗"}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.fertility_base_amount,callback:function(e){t.$set(t.tableData,"fertility_base_amount",e)},expression:"tableData.fertility_base_amount"}})],1),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}}),t._v(" "),a("form-item",{staticClass:"insurance-form-item",attrs:{editable:t.editable,label:""}},[a("el-input",{attrs:{type:"number"},model:{value:t.tableData.fertility_by_institution,callback:function(e){t.$set(t.tableData,"fertility_by_institution",e)},expression:"tableData.fertility_by_institution"}})],1)],1),t._v(" "),a("el-row",{staticClass:"insurance-row insurance-dark"},[a("el-form-item",{staticClass:"insurance-form-item",attrs:{label:"应收金额"}}),t._v(" "),a("el-form-item",{staticClass:"insurance-form-item",attrs:{label:""}}),t._v(" "),a("el-form-item",{staticClass:"insurance-form-item",attrs:{label:"个人"}},[t._v("\n        "+t._s(t.tableDataComputed.receivable_by_individual)+"\n      ")]),t._v(" "),a("el-form-item",{staticClass:"insurance-form-item",attrs:{label:"单位"}},[t._v("\n        "+t._s(t.tableDataComputed.receivable_by_institution)+"\n      ")]),t._v(" "),a("el-form-item",{staticClass:"insurance-form-item",attrs:{label:"合计"}},[t._v("\n        "+t._s(t.tableDataComputed.receivable_total)+"\n      ")])],1)],1),t._v(" "),"edit"===t.type||"create"===t.type?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("\n    "+t._s(t.$t("common."+t.type))+"\n  ")]):t._e()],1)},n=[],s=(a("efce"),a("4634"),a("ed8b"),a("e4e2")),l=(a("8f42"),a("5f1b")),r=a("764c"),o=a("cd05"),c=a("a46e"),u=a("e0fe");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"InsuranceDetail",components:{FormItem:l["a"],PersonSelector:r["a"]},data:function(){return{type:"",loading:!1,person:{},otherData:{date:"",fund_source:""},tableData:{pension_base_amount:0,pension_by_individual:0,pension_by_institution:0,medical_base_amount:0,medical_by_individual:0,medical_by_institution:0,work_injury_base_amount:0,work_injury_by_institution:0,unemployment_base_amount:0,unemployment_by_individual:0,unemployment_by_institution:0,fertility_base_amount:0,fertility_by_institution:0}}},computed:{editable:function(){return"create"===this.type||"edit"===this.type},tableDataComputed:function(){var t=Number(this.tableData.pension_by_individual)+Number(this.tableData.medical_by_individual)+Number(this.tableData.unemployment_by_individual),e=Number(this.tableData.pension_by_institution)+Number(this.tableData.medical_by_institution)+Number(this.tableData.work_injury_by_institution)+Number(this.tableData.unemployment_by_institution)+Number(this.tableData.fertility_by_institution),a={receivable_by_individual:t,receivable_by_institution:e,receivable_total:t+e};return a}},created:function(){this.tempRoute=Object.assign({},this.$route);var t=this.$store.getters.language,e=this.$route.params.id,a=this.$route.params.action_type||"show",i="create"===a?this.$route.params.type:e;this.type=a,this.financeId=e,this.setTagsViewTitle(t,i),this.setPageTitle(t,i),"create"!==a&&this.fetchData()},methods:{fetchData:function(){var t=this,e=this.$route.params.id;Object(o["g"])(e).then((function(e){for(var a in t.tableData)t.$set(t.tableData,a,e[a]);t.person=e.people,t.$set(t.otherData,"date",e.date),t.$set(t.otherData,"fund_source",e.fund_source)}))},getTitle:function(t,e){var a;if("show"===this.type)switch(t){case"zh":a=this.$t("route.social_insurance")+"详情";break;case"en":a=this.$t("route.social_insurance")+" Info";break}return"edit"===this.type&&(a="zh"===t?"编辑":"Edit"),"create"===this.type&&(a="zh"===t?"创建":"Create"),"".concat(a,"-").concat(e)},setTagsViewTitle:function(t,e){var a=Object.assign({},this.tempRoute,{title:this.getTitle(t,e)});this.$store.dispatch("tagsView/updateVisitedView",a)},setPageTitle:function(t,e){document.title=this.getTitle(t,e)},goToEdit:function(){var t=this.$route.params.id,e="/finance/social_insurance/".concat(t,"/edit");this.$router.push(e)},onDelete:function(){var t=this.$route.params.id;Object(u["a"])(this,(function(e){Object(o["c"])(t)}))},onSubmit:function(){var t=m({},this.tableData,{},this.tableDataComputed,{people:this.person,peopleJson:this.person},this.otherData);switch(this.type){case"create":this.postData(t);break;case"edit":this.updateData(t);break}},postData:function(t){var e=this;this.loading||(this.loading=!0,Object(o["a"])(t).then((function(t){e.$message({message:"创建成功! Created Successfully!",type:"success"});var a=document.getElementById("close-"+e.$route.path);a.click()})).catch((function(t){e.$message.error("创建失败! Creation Failed!"),e.loading=!1})))},updateData:function(t){var e=this,a=this.$route.params.id;this.loading||(this.loading=!0,Object(o["h"])(a,t).then((function(t){e.$message({message:"更新成功! Updated Successfully!",type:"success"}),e.loading=!1})).catch((function(t){e.$message.error("更新失败! Update Failed!"),e.loading=!1})))},closeThisView:function(){Object(c["a"])(this.$route.path)}}},f=b,p=(a("a5e9"),a("4e82")),_=Object(p["a"])(f,i,n,!1,null,"0e0d3760",null);e["default"]=_.exports},1242:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return n}));a("c041");function i(t){for(var e=[],a=0;a<t.length;a++)"id"!==t[a].index&&e.push(t[a]);return e}function n(t){return t.replace(/_./g,(function(t){return t.toUpperCase()})).replace(/^./,(function(t){return t.toUpperCase()})).replace(/_/g," ")}},"177c":function(t,e,a){},"377a":function(t,e,a){},"5ada":function(t,e,a){"use strict";var i=a("e636"),n=a.n(i);n.a},"5f1b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{staticClass:"form-item",attrs:{label:t.label}},[t.editable?t._t("default"):a("div",{staticClass:"not-editable"},["enumerated"===t.type&&t.content?a("el-tag",{attrs:{type:t._f("statusFilter")(t.content)}},[t._v("\n      "+t._s(t.format(t.content.toString()))+"\n    ")]):a("span",[t._v(t._s(t.content))])],1)],2)},n=[],s=a("1242"),l={name:"QtFormItem",components:{},filters:{statusFilter:function(t){var e={true:"success",false:"info"};return e[t]}},props:{editable:{type:Boolean,default:!1},label:{type:String,default:""},type:{type:String,default:""}},data:function(){return{content:void 0}},created:function(){this.content=this.$slots.default&&this.$slots.default[0].data.model.value},updated:function(){this.content=this.$slots.default&&this.$slots.default[0].data.model.value},methods:{format:function(t){return Object(s["b"])(t)}}},r=l,o=(a("c5c6"),a("4e82")),c=Object(o["a"])(r,i,n,!1,null,"3c9f2282",null);e["a"]=c.exports},"764c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"labSelector-container"},[t.editable?a("el-select",{attrs:{"value-key":"id",filterable:"",remote:"",placeholder:t.$t("common.pleaseSearch"),"remote-method":t.remoteMethod,loading:t.loading},on:{change:function(e){return t.$emit("change",t.loadSelected(e))}},model:{value:t.childSelected,callback:function(e){t.childSelected=e},expression:"childSelected"}},t._l(t.options,(function(e){return a("el-option",{key:e.id,attrs:{label:t.renderChildSelected(e),value:t.renderChildSelected(e)}})})),1):a("div",{staticClass:"not-editable"},[a("el-link",{attrs:{href:"#/people/"+t.selected.id}},[t._v(t._s(t.selected.name))])],1)],1)},n=[],s=(a("e6d1"),a("7cfd"),a("b189")),l={name:"PersonSelector",model:{prop:"selected",event:"change"},props:{editable:{type:Boolean,default:!1},type:{type:String,default:""},optionUrl:{type:String,default:""},selected:{type:Object,default:function(){}}},data:function(){return{options:[],loading:!1,childSelected:""}},created:function(){this.childSelected=this.renderChildSelected(this.selected)},methods:{renderChildSelected:function(t){return t?"".concat(t.name," (").concat(t.id,")"):null},loadSelected:function(t){if(!t)return null;var e=t.split(" ")[0],a=t.split("(")[1].split(")")[0];return{name:e,id:a}},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,Object(s["a"])(this.optionUrl,t).then((function(t){e.loading=!1,e.options=t}))):this.options=[]}}},r=l,o=(a("5ada"),a("4e82")),c=Object(o["a"])(r,i,n,!1,null,null,null);e["a"]=c.exports},a46e:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return n}));a("c041");function i(t){var e=t,a=t.$route;e.$store.dispatch("tagsView/delCachedView",a).then((function(){var t=a.fullPath;e.$nextTick((function(){e.$router.replace({path:"/redirect"+t})}))}))}function n(t){var e=document.getElementById("close-"+t);e.click()}},a5e9:function(t,e,a){"use strict";var i=a("377a"),n=a.n(i);n.a},b189:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("b775");function n(t,e){return Object(i["a"])({url:t,method:"get",params:{word:e}})}},c5c6:function(t,e,a){"use strict";var i=a("177c"),n=a.n(i);n.a},cd05:function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return r})),a.d(e,"h",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"b",(function(){return d}));var i=a("b775");function n(t){return Object(i["a"])({url:"/api/finance/social_insurances",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/finance/social_funds",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/api/finance/exps",method:"get",params:t})}function r(t){return Object(i["a"])({url:"api/finance/social_insurances/".concat(t),method:"get"})}function o(t,e){return Object(i["a"])({url:"api/finance/social_insurances/".concat(t),method:"put",data:JSON.stringify(e)})}function c(t){return Object(i["a"])({url:"api/finance/social_insurances",method:"post",data:JSON.stringify(t)})}function u(t){return Object(i["a"])({url:"api/finance/social_insurances/".concat(t),method:"delete"})}function d(t,e){return"expenditure"===t&&(t="exps"),Object(i["a"])({url:"/api/finance/".concat(t,"/").concat(e),method:"delete"})}},e0fe:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("c041");var i=a("a46e");function n(t,e){var a=t;a.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(e).then((function(t){a.$message({type:"success",message:"删除成功!"}),Object(i["a"])(a.$route.path),Object(i["a"])(a.$route.path.replace("/edit",""))})).catch((function(t){console.log(t),a.$message({type:"info",message:"已取消删除"})}))}},e636:function(t,e,a){}}]);